import e,{forwardRef as t,useRef as n,useState as r}from"react";import{Avatar as o}from"@lg-chat/avatar";import{InputBar as a}from"@lg-chat/input-bar";import{Message as i}from"@lg-chat/message";import{MessageFeed as l}from"@lg-chat/message-feed";import{WithMessageRating as s}from"@lg-chat/message-feedback/src/InlineMessageFeedback/InlineMessageFeedback.stories";import{MessagePrompts as c,MessagePrompt as u}from"@lg-chat/message-prompts";import{storybookArgTypes as m}from"@lg-tools/storybook-utils";import{css as d,cx as g}from"@leafygreen-ui/emotion";import f from"@leafygreen-ui/icon/dist/Sparkle";import{useDarkMode as p}from"@leafygreen-ui/leafygreen-provider";import{Theme as y}from"@leafygreen-ui/lib";import{palette as h}from"@leafygreen-ui/palette";import{transitionDuration as b,hoverRing as v,focusRing as k,spacing as w,BaseFontSize as E}from"@leafygreen-ui/tokens";import{Body as x}from"@leafygreen-ui/typography";import{Transition as S}from"react-transition-group";import{ChatWindow as O}from"@lg-chat/chat-window";import M from"@leafygreen-ui/icon/dist/ChevronDown";import N from"@leafygreen-ui/popover";function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function B(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L,H,F,G,R,W,U,z,q,$=[{id:1,messageBody:"Hi! Ask me anything.",isMongo:!0},{id:2,messageBody:"Can you tell me the answer to this thing?",userName:"Sean Park"},{id:3,messageBody:"This thing is `something`.",isMongo:!0},{id:4,messageBody:'This should do the trick.\n\n```typescript\ntype HelloWorld = "Hello, world!"\n\nfunction helloWorld() {\nreturn "Hello, world!" satisfies HelloWorld;\n}\n```\n      ',isMongo:!0,messageRatingProps:{onChange:function(e){return console.log("Message 4 was ".concat(e.target.value,"."))}}},{id:5,messageBody:"How about another question?",userName:"Sean Park"},{id:6,messageBody:"Sorry, MongoAI can't do that right now.\n\nRefer to [LeafyGreen UI](mongodb.design) or [LeafyGreen UI](mongodb.design) for more details. I'm filling out this space to see if the message will line up to the right side.\n    ",isMongo:!0,messageRatingProps:{onChange:function(e){return console.log("Message 6 was ".concat(e.target.value,"."))}}}],J=d(L||(L=B(["\n  border-radius: 40px;\n  padding: 0px;\n  outline: none;\n  border-style: solid;\n  cursor: pointer;\n  transition: box-shadow ","ms ease-in-out;\n"])),b.slower),K=(C(G={},y.Dark,d(H||(H=B(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n    &:hover {\n      box-shadow: ",";\n    }\n\n    &:focus-visible {\n      box-shadow: ",";\n    }\n  "])),h.green.dark1,h.black,h.green.light1,v.dark.green,k.dark.default)),C(G,y.Light,d(F||(F=B(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    &:hover {\n      box-shadow: ",";\n    }\n\n    &:focus-visible {\n      box-shadow: ",";\n    }\n  "])),h.green.dark1,h.white,h.green.dark2,v.light.green,k.light.default)),G),Q=d(R||(R=B(["\n  display: flex;\n  gap: ","px;\n  align-items: center;\n  padding: 12px ","px;\n"])),w[2],w[3]),V=d(W||(W=B(["\n  color: inherit;\n"]))),X=["className","children","darkMode"],Y=t((function(t,n){var r=t.className,o=t.children,a=t.darkMode,i=j(t,X),l=p(a).theme;return e.createElement("button",T({className:g(J,K[l],r)},i,{ref:n}),e.createElement("div",{className:Q},e.createElement(f,{fill:l===y.Light?h.green.dark1:h.green.dark3}),o&&e.createElement(x,{baseFontSize:E.Body1,className:V},e.createElement("b",null,o))))}));Y.displayName="ChatTrigger";var Z,_,ee=d(U||(U=B(["\n  position: relative;\n"]))),te=d(z||(z=B(["\n  transition: all ","ms ease-in-out;\n  transform-origin: bottom right;\n  min-width: 360px;\n  width: 360px;\n"])),b.default),ne=d(q||(q=B(["\n  border-radius: 24px;\n"]))),re=["className","children","defaultOpen","darkMode","trigger","badgeText","triggerText","title","open","onTriggerClick","onClose","popoverProps"],oe=t((function(t,o){var a=t.className,i=t.children,l=t.defaultOpen,s=void 0!==l&&l,c=t.darkMode,u=t.trigger,m=t.badgeText,d=t.triggerText,f=t.title,p=t.open,y=t.onTriggerClick,h=t.onClose,b=t.popoverProps,v=j(t,re),k=n(null),w=P(r(s),2),E=w[0],x=w[1],C=function(e){void 0===p&&x(!1),null==h||h(e)};return e.createElement("div",T({ref:o},v,{className:g(ee,a)}),null!=u?u:e.createElement(Y,{onClick:function(e){void 0===p&&x((function(e){return!e})),null==y||y(e)}},d),e.createElement(N,T({justify:"end",align:"top"},b,{active:null!=p?p:E}),e.createElement(S,{nodeRef:k,in:!0,timeout:100},(function(t){return e.createElement("div",{ref:k,className:te,style:{transform:"entering"===t||"entered"===t?"scale(1)":"scale(0)",opacity:"entering"===t||"entered"===t?1:0}},e.createElement(O,{darkMode:c,badgeText:m,className:ne,title:f,onClose:C,iconSlot:e.createElement(M,null)},i))}))))}));oe.displayName="FixedChatWindow";var ae={title:"Chat/FixedChatWindow",component:oe,argTypes:{darkMode:m.darkMode},parameters:{default:"Uncontrolled"}},ie=function(t){var n=t.id,r=t.isMongo,a=t.messageBody,l=t.userName,m=t.messageRatingProps;return e.createElement(i,{key:n,sourceType:"markdown",avatar:e.createElement(o,{variant:r?"mongo":"user"}),isSender:!!l,messageBody:a},0===n&&e.createElement(c,null,e.createElement(u,{selected:!0},"Can you tell me the answer to this thing?"),e.createElement(u,null,"Can you tell me the answer to that thing?")),!!m&&e.createElement(s,{className:d(Z||(Z=B(["\n          min-width: unset;\n        "])))}))},le=d(_||(_=B(["\n  position: fixed;\n  bottom: 16px;\n  right: 32px;\n"]))),se=function(t){var n=P(r($),2),o=n[0],i=n[1];return e.createElement("div",{className:le},e.createElement(oe,T({},t,{defaultOpen:!0,title:"LG Chat Demo",badgeText:"Beta",triggerText:"MongoDB AI"}),e.createElement(l,null,o.map((function(t){return e.createElement(ie,T({key:t.id},t))}))),e.createElement(a,{onMessageSend:function(e){var t={messageBody:e,userName:"Sean Park"};i((function(e){return[].concat(I(e),[t])}))}})))},ce=function(t){var n=P(r($),2),o=n[0],i=n[1],s=P(r(!0),2),c=s[0],u=s[1];return e.createElement("div",{className:le},e.createElement(oe,T({},t,{defaultOpen:!0,title:"LG Chat Demo",badgeText:"Beta",triggerText:"MongoDB AI",open:c,onClose:function(){u(!1)},onTriggerClick:function(){u((function(e){return!e}))}}),e.createElement(l,null,o.map((function(t){return e.createElement(ie,T({key:t.id},t))}))),e.createElement(a,{onMessageSend:function(e){var t={messageBody:e,userName:"Sean Park"};i((function(e){return[].concat(I(e),[t])}))}})))},ue=function(t){var n=P(r([]),2),o=n[0],i=n[1];return e.createElement("div",{className:le},e.createElement(oe,T({},t,{defaultOpen:!0,title:"LG Chat Demo",badgeText:"Beta",triggerText:"MongoDB AI"}),e.createElement(l,null,o.map((function(t){return e.createElement(ie,T({key:t.id},t))}))),e.createElement(a,{onMessageSend:function(e){var t={messageBody:e,userName:"Sean Park"};i((function(e){return[].concat(I(e),[t])}))}})))};export{ce as Controlled,ue as Empty,se as Uncontrolled,ae as default};
